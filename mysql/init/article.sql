-- MySQL dump 10.13  Distrib 8.0.44, for Linux (x86_64)
--
-- Host: localhost    Database: article
-- ------------------------------------------------------
-- Server version	8.0.44

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `articles`
--

DROP TABLE IF EXISTS `articles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `articles` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `excerpt` text,
  `content` longtext,
  `markdown_content` longtext,
  `category` varchar(100) DEFAULT NULL,
  `tags` varchar(255) DEFAULT NULL,
  `view_count` int DEFAULT '0',
  `status` enum('published','draft') DEFAULT 'published',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `original_filename` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_original_filename` (`original_filename`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `articles`
--

LOCK TABLES `articles` WRITE;
/*!40000 ALTER TABLE `articles` DISABLE KEYS */;
INSERT INTO `articles` VALUES (1,'Linux运维经验','# 运维经验\r\n\r\n### 1. 服务器安全加固\r\n\r\n- 更新系统补丁\r\n\r\n- 配置防火墙（如iptables或ufw），只开放必要的端口（如80, 443, 22）\r\n\r\n- **禁用root远程登录，使用密钥认证代替密码认证**\r\n\r\n  ```bash\r\n  #1.本地生成密钥对，公钥上传服务器\r\n  ssh-keygen -t rsa #(-b字数 -C注释 -f 文件名)\r\n  #当...','<h1>运维经验</h1>\n<h3>1. 服务器安全加固</h3>\n<ul>\n<li>\n<p>更新系统补丁</p>\n</li>\n<li>\n<p>配置防火墙（如iptables或ufw），只开放必要的端口（如80, 443, 22）</p>\n</li>\n<li>\n<p><strong>禁用root远程登录，使用密钥认证代替密码认证</strong></p>\n<pre><code class=\"language-bash\">#1.本地生成密钥对，公钥上传服务器\nssh-keygen -t rsa #(-b字数 -C注释 -f 文件名)\n#当前目录会出现密钥：id_rsa,公钥:idr_rsa.pub\n#密钥放到本地主机用户家目录的.ssh文件夹中，公钥内容追加至服务器用户家目录的.ssh文件夹中的authorized_keys文件中（没有就自己创建该文件）\n#2.编辑 sshd 配置文件，通常是 /etc/ssh/sshd_config\nPermitRootLogin  no          #禁止远程登录root\nPasswordAuthentication  no   #禁止密码登录\n#3.重启服务  \nsystemctl restart sshd</code></pre>\n</li>\n<li>\n<p><strong>配置fail2ban来防止暴力破解</strong></p>\n<pre><code class=\"language-bash\">#1.安装后进入/etc/fail2ban/  复制默认配置文件本地用，\ncp jail.conf jial.local\n#2.配置jial.loacl\n    [DEFAULT]\n    bantime： #“拉黑时长”。默认可能是10m（10分钟）建议把它改得更长一些，比如1h或者24h\n    findtime：#“观察窗口”。它配合maxretry一起工作。默认的10m意味着“在10分钟内”。\n    maxretry：#“最大尝试次数”。默认可能是5。\n    [sshd]\n  enabled = true\n  port = ssh #（默认22）改了的话这也改\n#3.重启服务   \nsystemctl restart fail2ban\nfail2ban-client status sshd #查看具体报告</code></pre>\n</li>\n</ul>\n<h3>2. Web服务器优化</h3>\n<ul>\n<li>\n<p><strong>配置Nginx并优化性能参数</strong></p>\n<pre><code class=\"language-nginx\">Nginx高并发配置七步法（基于Nginx 1.18技术栈）\nuser  nginx; \nworker_processes  auto;   # 自动匹配CPU核心数，物理机设置为CPU核心数*2\nworker_rlimit_nofile 65535;  # 突破系统默认文件限制\n\nevents {\n    use epoll;           # Linux内核下的事件驱动模型\n    worker_connections  10240; # 每个worker处理连接数，注意总和不要超过系统最大文件限制\n    multi_accept on;     # 允许单次循环接受多个新连接\n}\n\nhttp {\n    sendfile        on;     # 零拷贝技术减少内存复制\n    tcp_nopush      on;     # 攒够数据包再发送\n    tcp_nodelay     on;     # 禁用Nagle算法加快响应\n    keepalive_timeout  60s; # 合理控制长连接时间\n    keepalive_requests 1000;# 单个连接最大请求数\n    ...\n}</code></pre>\n</li>\n<li>\n<p><strong>设置静态资源缓存</strong></p>\n<p>进入nginx配置文件</p>\n<pre><code class=\"language-nginx\"> server中加上location配置\nlocation ~* ^.+\\.(css|js|ico|gif|jpg|jpeg|png)$ {\n log_not_found off;\n # 关闭日志\n access_log off;\n # 缓存时间7天\n expires 7d;\n add_header Cache-Control \"public, immutable\";  # 缓存控制头\n }</code></pre>\n</li>\n<li>\n<p><strong>配置Gzip压缩</strong></p>\n<pre><code class=\"language-nginx\">首先在`http`模块加配置：主要是使用gzip压缩\n# 开启gzip\ngzip  on;\n# 启用gzip压缩的最小文件，小于设置值的文件将不会压缩\ngzip_min_length 1k;\n# gzip 压缩级别，1-10，数字越大压缩的越好，也越占用CPU时间。一般设置1和2\ngzip_comp_level 2;\n# 进行压缩的文件类型。javascript有多种形式。其中的值可以在 mime.types 文件中找到。\ngzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;\n# 是否在http header中添加Vary: Accept-Encoding，建议开启\ngzip_vary on;\n# 禁用IE 6 gzip\ngzip_disable \"MSIE [1-6]\\.\";</code></pre>\n</li>\n</ul>\n<h3>3. 数据库优化</h3>\n<ul>\n<li>\n<p><strong>定期备份数据库，并测试恢复流程</strong></p>\n<pre><code class=\"language-bash\">#全量备份与恢复\n#使用mysql自带备份与恢复工具mysqldump\n mysqldump -u root -p passwd db_name &gt; db_name_backup.sql #备份指定数据库\n mysqldump -u root -p passwd db_name &lt; db_name_backup.sql #恢复指定数据库\n#增量备份（先不考虑）\n#mysql没有内置增量备份工具，但可通过二进制日志binlog（Binary Log）实现</code></pre>\n<pre><code class=\"language-bash\">#!/bin/bash\n#自动化备份脚本\n# 设置数据库参数\nDB_USER=\"root\"\nDB_PASSWORD=\"password\"\nDB_NAME=\"db_name\"\nBACKUP_DIR=\"/path/to/backup\"\nDATE=$(date +\"%Y%m%d%H%M\")\n# 创建备份\nmysqldump -u $DB_USER -p$DB_PASSWORD $DB_NAME &gt; $BACKUP_DIR/${DB_NAME}_backup_$DATE.sql\n# 删除超过7天的备份\nfind $BACKUP_DIR -name \"*.sql\" -type f -mtime +7 -exec rm {} \\;</code></pre>\n<pre><code class=\"language-bash\">chmod +x db_name_backup.sh\n#打开cron编辑器：\ncrontab -e\n  #添加以下行以设置每日备份任务：\n  0 2 * * * /path/db_name_backup_.sh</code></pre>\n</li>\n<li>\n<p><strong>优化数据库配置</strong>（如innodb_buffer_pool_size）</p>\n</li>\n<li>\n<p><strong>学习使用慢查询日志，并优化慢查询</strong></p>\n</li>\n</ul>\n<pre><code class=\"language-shell\">#慢查询日志（Slow Query Log）是数据库记录执行时间超过预设阈值的 SQL 语句的日志系统。</code></pre>\n<h3>4. 部署HTTPS()</h3>\n<ul>\n<li>申请免费的SSL证书（如Let\'s Encrypt）并配置到Web服务器</li>\n<li>设置HTTP重定向到HTTPS</li>\n<li><strong>域名解析未通过暂时放弃</strong></li>\n</ul>\n<h3>5. 监控设置</h3>\n<ul>\n<li>安装和配置监控工具（如Prometheus + Grafana）来监控服务器资源</li>\n<li>设置告警规则，当资源使用率超过阈值时发送告警</li>\n</ul>\n<p>​       <a href=\"http://47.114.86.117:9001/article_detail.php?id=3\">Prometheus和Granafa监控方案</a></p>\n<h3>6. 日志管理</h3>\n<ul>\n<li>\n<p>配置日志轮转（logrotate）</p>\n<p><a href=\"http://47.114.86.117:9001/article_detail.php?id=5\">Logrotate日志轮转</a></p>\n</li>\n<li>\n<p>集中管理日志，可以使用ELK栈或Graylog</p>\n</li>\n</ul>\n<h3>7. 自动化部署</h3>\n<ul>\n<li>\n<p>编写Shell脚本自动化部署网站（包括代码拉取、依赖安装、数据库迁移等）</p>\n<p><a href=\"http://47.114.86.117:9001/article_detail.php?id=7\">Ansible的安装与使用</a></p>\n</li>\n<li>\n<p>学习使用CI/CD工具，如Jenkins，实现自动化测试和部署</p>\n</li>\n</ul>\n<h3>8. 容器化</h3>\n<ul>\n<li>\n<p>将您的网站Docker化，编写Dockerfile</p>\n</li>\n<li>\n<p>使用Docker Compose编排多个容器</p>\n<p><a href=\"http://47.114.86.117:9001/article_detail.php?id=2\">Docker的安装与使用</a></p>\n</li>\n<li>\n<p>学习Kubernetes，将应用部署到K8s集群</p>\n<p><a href=\"http://47.114.86.117:9001/article_detail.php?id=8\">K8S的安装与使用</a></p>\n</li>\n</ul>\n<h3>9. 高可用性</h3>\n<ul>\n<li>如果条件允许，可以搭建多台服务器，配置负载均衡（如使用Nginx做负载均衡器）</li>\n<li>数据库主从复制</li>\n</ul>\n<h3>10. 备份策略</h3>\n<ul>\n<li>定期备份网站文件和数据库，并上传到远程存储（如另一台服务器、云存储）</li>\n<li>测试备份文件的恢复过程</li>\n</ul>\n<h3>11. 性能测试</h3>\n<ul>\n<li>学习使用性能测试工具（如Apache Bench, JMeter）对网站进行压力测试</li>\n<li>根据测试结果进行优化</li>\n</ul>\n<h3>12. 文档编写</h3>\n<ul>\n<li>记录运维过程，包括服务器配置、部署步骤、故障处理等，形成文档</li>\n</ul>','# 运维经验\r\n\r\n### 1. 服务器安全加固\r\n\r\n- 更新系统补丁\r\n\r\n- 配置防火墙（如iptables或ufw），只开放必要的端口（如80, 443, 22）\r\n\r\n- **禁用root远程登录，使用密钥认证代替密码认证**\r\n\r\n  ```bash\r\n  #1.本地生成密钥对，公钥上传服务器\r\n  ssh-keygen -t rsa #(-b字数 -C注释 -f 文件名)\r\n  #当前目录会出现密钥：id_rsa,公钥:idr_rsa.pub\r\n  #密钥放到本地主机用户家目录的.ssh文件夹中，公钥内容追加至服务器用户家目录的.ssh文件夹中的authorized_keys文件中（没有就自己创建该文件）\r\n  #2.编辑 sshd 配置文件，通常是 /etc/ssh/sshd_config\r\n  PermitRootLogin  no          #禁止远程登录root\r\n  PasswordAuthentication  no   #禁止密码登录\r\n  #3.重启服务  \r\n  systemctl restart sshd\r\n  ```\r\n\r\n- **配置fail2ban来防止暴力破解**\r\n\r\n  ```bash\r\n  #1.安装后进入/etc/fail2ban/  复制默认配置文件本地用，\r\n  cp jail.conf jial.local\r\n  #2.配置jial.loacl\r\n      [DEFAULT]\r\n      bantime： #“拉黑时长”。默认可能是10m（10分钟）建议把它改得更长一些，比如1h或者24h\r\n      findtime：#“观察窗口”。它配合maxretry一起工作。默认的10m意味着“在10分钟内”。\r\n      maxretry：#“最大尝试次数”。默认可能是5。\r\n      [sshd]\r\n  	enabled = true\r\n  	port = ssh #（默认22）改了的话这也改\r\n  #3.重启服务   \r\n  systemctl restart fail2ban\r\n  fail2ban-client status sshd #查看具体报告\r\n  ```\r\n\r\n\r\n\r\n### 2. Web服务器优化\r\n\r\n- **配置Nginx并优化性能参数**\r\n\r\n  ```nginx\r\n  Nginx高并发配置七步法（基于Nginx 1.18技术栈）\r\n  user  nginx; \r\n  worker_processes  auto;   # 自动匹配CPU核心数，物理机设置为CPU核心数*2\r\n  worker_rlimit_nofile 65535;  # 突破系统默认文件限制\r\n  \r\n  events {\r\n      use epoll;           # Linux内核下的事件驱动模型\r\n      worker_connections  10240; # 每个worker处理连接数，注意总和不要超过系统最大文件限制\r\n      multi_accept on;     # 允许单次循环接受多个新连接\r\n  }\r\n  \r\n  http {\r\n      sendfile        on;     # 零拷贝技术减少内存复制\r\n      tcp_nopush      on;     # 攒够数据包再发送\r\n      tcp_nodelay     on;     # 禁用Nagle算法加快响应\r\n      keepalive_timeout  60s; # 合理控制长连接时间\r\n      keepalive_requests 1000;# 单个连接最大请求数\r\n      ...\r\n  }\r\n  ```\r\n\r\n- **设置静态资源缓存**\r\n\r\n  进入nginx配置文件\r\n\r\n  ```nginx\r\n   server中加上location配置\r\n  location ~* ^.+\\.(css|js|ico|gif|jpg|jpeg|png)$ {\r\n   log_not_found off;\r\n   # 关闭日志\r\n   access_log off;\r\n   # 缓存时间7天\r\n   expires 7d;\r\n   add_header Cache-Control \"public, immutable\";  # 缓存控制头\r\n   }\r\n  ```\r\n\r\n- **配置Gzip压缩**\r\n\r\n  ```nginx\r\n  首先在`http`模块加配置：主要是使用gzip压缩\r\n  # 开启gzip\r\n  gzip  on;\r\n  # 启用gzip压缩的最小文件，小于设置值的文件将不会压缩\r\n  gzip_min_length 1k;\r\n  # gzip 压缩级别，1-10，数字越大压缩的越好，也越占用CPU时间。一般设置1和2\r\n  gzip_comp_level 2;\r\n  # 进行压缩的文件类型。javascript有多种形式。其中的值可以在 mime.types 文件中找到。\r\n  gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;\r\n  # 是否在http header中添加Vary: Accept-Encoding，建议开启\r\n  gzip_vary on;\r\n  # 禁用IE 6 gzip\r\n  gzip_disable \"MSIE [1-6]\\.\";\r\n  ```\r\n\r\n\r\n\r\n### 3. 数据库优化\r\n\r\n- **定期备份数据库，并测试恢复流程**\r\n\r\n  ```bash\r\n  #全量备份与恢复\r\n  #使用mysql自带备份与恢复工具mysqldump\r\n   mysqldump -u root -p passwd db_name > db_name_backup.sql #备份指定数据库\r\n   mysqldump -u root -p passwd db_name < db_name_backup.sql #恢复指定数据库\r\n  #增量备份（先不考虑）\r\n  #mysql没有内置增量备份工具，但可通过二进制日志binlog（Binary Log）实现\r\n  ```\r\n\r\n  ```bash\r\n  #!/bin/bash\r\n  #自动化备份脚本\r\n  # 设置数据库参数\r\n  DB_USER=\"root\"\r\n  DB_PASSWORD=\"password\"\r\n  DB_NAME=\"db_name\"\r\n  BACKUP_DIR=\"/path/to/backup\"\r\n  DATE=$(date +\"%Y%m%d%H%M\")\r\n  # 创建备份\r\n  mysqldump -u $DB_USER -p$DB_PASSWORD $DB_NAME > $BACKUP_DIR/${DB_NAME}_backup_$DATE.sql\r\n  # 删除超过7天的备份\r\n  find $BACKUP_DIR -name \"*.sql\" -type f -mtime +7 -exec rm {} \\;\r\n  ```\r\n\r\n  ```bash\r\n  chmod +x db_name_backup.sh\r\n  #打开cron编辑器：\r\n  crontab -e\r\n  	#添加以下行以设置每日备份任务：\r\n  	0 2 * * * /path/db_name_backup_.sh\r\n  ```\r\n\r\n- **优化数据库配置**（如innodb_buffer_pool_size）\r\n\r\n- **学习使用慢查询日志，并优化慢查询**\r\n\r\n```shell\r\n#慢查询日志（Slow Query Log）是数据库记录执行时间超过预设阈值的 SQL 语句的日志系统。\r\n```\r\n\r\n\r\n\r\n### 4. 部署HTTPS()\r\n\r\n- 申请免费的SSL证书（如Let\'s Encrypt）并配置到Web服务器\r\n- 设置HTTP重定向到HTTPS\r\n- **域名解析未通过暂时放弃**\r\n\r\n\r\n\r\n### 5. 监控设置\r\n\r\n- 安装和配置监控工具（如Prometheus + Grafana）来监控服务器资源\r\n- 设置告警规则，当资源使用率超过阈值时发送告警\r\n\r\n​       [Prometheus和Granafa监控方案](http://47.114.86.117:9001/article_detail.php?id=3)\r\n\r\n### 6. 日志管理\r\n\r\n- 配置日志轮转（logrotate）\r\n\r\n  [Logrotate日志轮转](http://47.114.86.117:9001/article_detail.php?id=5)\r\n\r\n- 集中管理日志，可以使用ELK栈或Graylog\r\n\r\n### 7. 自动化部署\r\n\r\n- 编写Shell脚本自动化部署网站（包括代码拉取、依赖安装、数据库迁移等）\r\n\r\n  [Ansible的安装与使用](http://47.114.86.117:9001/article_detail.php?id=7)\r\n\r\n- 学习使用CI/CD工具，如Jenkins，实现自动化测试和部署\r\n\r\n### 8. 容器化\r\n\r\n- 将您的网站Docker化，编写Dockerfile\r\n\r\n- 使用Docker Compose编排多个容器\r\n\r\n  [Docker的安装与使用](http://47.114.86.117:9001/article_detail.php?id=2)\r\n\r\n- 学习Kubernetes，将应用部署到K8s集群\r\n\r\n  [K8S的安装与使用](http://47.114.86.117:9001/article_detail.php?id=8)\r\n\r\n\r\n\r\n### 9. 高可用性\r\n\r\n- 如果条件允许，可以搭建多台服务器，配置负载均衡（如使用Nginx做负载均衡器）\r\n- 数据库主从复制\r\n\r\n\r\n\r\n### 10. 备份策略\r\n\r\n- 定期备份网站文件和数据库，并上传到远程存储（如另一台服务器、云存储）\r\n- 测试备份文件的恢复过程\r\n\r\n\r\n\r\n### 11. 性能测试\r\n\r\n- 学习使用性能测试工具（如Apache Bench, JMeter）对网站进行压力测试\r\n- 根据测试结果进行优化\r\n\r\n\r\n\r\n### 12. 文档编写\r\n\r\n- 记录运维过程，包括服务器配置、部署步骤、故障处理等，形成文档','未分类','',2,'published','2025-12-04 11:28:29','2025-12-04 11:29:04','01_Linux运维经验.md');
/*!40000 ALTER TABLE `articles` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-12-04 11:39:59
